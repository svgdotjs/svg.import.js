(function(){function n(d,b,g,h,l){var p,q,m,a,f,c,e;p=0;for(q=d.length;p<q;p++){c=d[p];e={};a=null;f=c.nodeName.toLowerCase();e=SVG.parse.attr(c);switch(f){case "rect":case "circle":case "ellipse":a=b[f](0,0);break;case "line":a=b.line(0,0,0,0);break;case "text":if(2>c.childNodes.length)a=b[f](c.textContent);else{var k;a=null;for(m=0;m<c.childNodes.length;m++)k=c.childNodes[m],"#text"!=k.nodeName.toLowerCase()&&"tspan"==k.nodeName.toLowerCase()&&(k.textContent=k.textContent.trim().replace(/\n/g," ",
" ").match(/[\S]+(\s)*/g).join(" "),null===a?a=b[f](k.textContent):a.tspan(k.textContent).attr(SVG.parse.attr(k)))}break;case "path":a=b.path(e.d);break;case "polygon":case "polyline":a=b[f](e.points);break;case "image":a=b.image(e["xlink:href"]);break;case "g":case "svg":a=b["g"==f?"group":"nested"]();n(c.childNodes,a,g+1,h,l);break;case "defs":n(c.childNodes,b.defs(),g+1,h,l);break;case "use":a=b.use();break;case "clippath":case "mask":a=b["mask"==f?"mask":"clip"]();n(c.childNodes,a,g+1,h,l);break;
case "lineargradient":case "radialgradient":a=b.defs().gradient(f.split("gradient")[0],function(a){for(var b=0;b<c.childNodes.length;b++)"#text"!=c.childNodes[b].nodeName.toLowerCase()&&a.at({offset:0}).attr(SVG.parse.attr(c.childNodes[b])).style(c.childNodes[b].getAttribute("style"))});break;case "#comment":case "#text":case "metadata":case "desc":break;case "marker":a=b.defs().marker(c.getAttribute("markerWidth")||0,c.getAttribute("markerHeight")||0);n(c.childNodes,a,g+1,h,l);break;default:console.log("SVG Import got unexpected type "+
f,c)}switch(f){case "circle":e.rx=e.r,e.ry=e.r,delete e.r}a&&(m=SVG.parse.transform(e.transform),delete e.transform,a.attr(e).transform(m),a.attr("id")&&h.add(a.attr("id"),a,0==g),"text"==f&&a.rebuild(),"function"==typeof l&&l.call(a,g))}return b}SVG.extend(SVG.Container,{svg:function(d,b){var g=document.createElement("div"),h=new SVG.ImportStore;g.innerHTML=d.replace(/\n/,"").replace(/<([^\s]+)([^<]+?)\/>/g,"<$1$2></$1>");n(g.childNodes,this,0,h,b);return h}});SVG.ImportStore=function(){this._importStoreRoots=
new SVG.Set;this._importStore={}};SVG.extend(SVG.ImportStore,{add:function(d,b,g){if(d){if(this._importStore[d]){var h=d;d+=Math.round(1E16*Math.random());console.warn('Encountered duplicate id "'+h+'". Changed store key to "'+d+'".')}this._importStore[d]=b}!0===g&&this._importStoreRoots.add(b);return this},roots:function(d){return"function"==typeof d?(this._importStoreRoots.each(d),this):this._importStoreRoots.valueOf()},get:function(d){return this._importStore[d]},remove:function(){return this.roots(function(){this.remove()})}})}).call(this);