// svg.import.js 0.6 - Copyright (c) 2013 Wout Fierens - Licensed under the MIT license
SVG.extend(SVG.Container,{svg:function(e,t){var n=document.createElement("div"),r={};n.innerHTML=e.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>");this._convertNodes(n.childNodes,this,0,r,t);n=null;return r},_objectifyAttributes:function(e){var t,n=e.attributes||[],r={};for(t=n.length-1;t>=0;t--)r[n[t].nodeName]=n[t].nodeValue;return r},_convertNodes:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p;for(s=0,o=e.length;s<o;s++){c=e[s];h={};p=[];l=c.nodeName.toLowerCase();h=this._objectifyAttributes(c);switch(l){case"rect":case"circle":case"ellipse":f=t[l](0,0);break;case"line":f=t.line(0,0,0,0);break;case"text":if(c.childNodes.length==0){f=t[l](c.textContent)}else{var d;f=null;for(u=0;u<c.childNodes.length;u++){d=c.childNodes[u];if(d.nodeName.toLowerCase()=="tspan"){if(f===null)f=t[l](d.textContent);else f.tspan(d.textContent).attr(this._objectifyAttributes(d))}}}break;case"path":case"polygon":case"polyline":f=t[l]();break;case"image":f=t.image(h["xlink:href"]);break;case"g":case"svg":f=t[l=="g"?"group":"nested"]();this._convertNodes(c.childNodes,f,n+1,r,i);break;case"defs":var u,d,v,m;for(u=0;u<c.childNodes.length;u++){d=c.childNodes[u];m=d.nodeName.toLowerCase();if(m=="clippath"||m=="mask"){v=this.defs().put(m=="mask"?new SVG.Mask:new SVG.Clip).attr(this._objectifyAttributes(d));this._convertNodes(d.childNodes,v,n+1,r,i)}}break;case"#comment":case"#text":case"metadata":case"desc":break;default:console.log("SVG Import got unexpected type "+l,c);break}switch(l){case"circle":h.rx=h.r;h.ry=h.r;delete h.r;break}if(f){f.attr(h);if(f.attr("id"))r[f.attr("id")]=f;if(l=="text")f.rebuild();if(typeof i=="function")i.call(f)}}return t}})